{"version":3,"file":"common.js","sources":["webpack:///./src/base/RootStoreProvider.tsx","webpack:///./src/base/richtext/base.ts","webpack:///./src/base/richtext/css.ts","webpack:///./src/base/richtext/richtext-format.ts","webpack:///./src/base/richtext/richtext.scss"],"sourcesContent":["import React, { createContext, useContext } from 'react';\r\nimport { RootStore } from '@ysyp/stores/dist/RootStore';\r\n\r\n// single root store instance\r\nconst rootStoreInstance: RootStore = new RootStore();\r\n\r\n// expose the store\r\nexport const getRootStore = () => rootStoreInstance;\r\n\r\nexport const RootStoreContext = createContext(rootStoreInstance);\r\n\r\n// Root store wrapped in a React context.\r\n// 新建钩子函数：获取上下文中的数据（Store 对象）\r\nexport const useRootStore = () => {\r\n  return useContext(RootStoreContext);\r\n};\r\n\r\n// 新建组件：通过 Provider 传递上下文中的数据\r\nexport const RootStoreProvider = ({ children }) => {\r\n  return <RootStoreContext.Provider value={rootStoreInstance}>{children}</RootStoreContext.Provider>;\r\n};\r\n","export const baseCssToJs = {\r\n  html: `\r\n    display: block;\r\n  `,\r\n  head: `\r\n    display: none;\r\n  `,\r\n  meta: `\r\n    display: none;\r\n  `,\r\n  title: `\r\n    display: none;\r\n  `,\r\n  link: `\r\n    display: none;\r\n  `,\r\n  style: `\r\n    display: none;\r\n  `,\r\n  script: `\r\n    display: none;\r\n  `,\r\n  body: `\r\n    display: block;\r\n    margin: 8px;\r\n  `,\r\n  p: `\r\n    display: block;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n  `,\r\n  div: `\r\n    display: block;\r\n  `,\r\n  layer: `\r\n    display: block;\r\n  `,\r\n  article: `\r\n    display: block;\r\n  `,\r\n  aside: `\r\n    display: block;\r\n  `,\r\n  footer: `\r\n    display: block;\r\n  `,\r\n  header: `\r\n    display: block;\r\n  `,\r\n  hgroup: `\r\n    display: block;\r\n  `,\r\n  main: `\r\n    display: block;\r\n  `,\r\n  nav: `\r\n    display: block;\r\n  `,\r\n  section: `\r\n    display: block;\r\n  `,\r\n  marquee: `\r\n    display: inline-block;\r\n    width: -webkit-fill-available;\r\n  `,\r\n  address: `\r\n    display: block;\r\n    font-style: italic;\r\n  `,\r\n  blockquote: `\r\n    display: block;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 40px;\r\n    margin-inline-end: 40px;\r\n  `,\r\n  figcaption: `\r\n    display: block;\r\n  `,\r\n  figure: `\r\n    display: block;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 40px;\r\n    margin-inline-end: 40px;\r\n  `,\r\n  q: `\r\n    display: inline;\r\n  `,\r\n  center: `\r\n    display: block;\r\n    text-align: -webkit-center;\r\n  `,\r\n  hr: `\r\n    display: block;\r\n    overflow: hidden;\r\n    unicode-bidi: isolate;\r\n    margin-block-start: 0.5em;\r\n    margin-block-end: 0.5em;\r\n    margin-inline-start: auto;\r\n    margin-inline-end: auto;\r\n    border-style: inset;\r\n    border-width: 1px;\r\n  `,\r\n  map: `\r\n    display: inline;\r\n  `,\r\n  video: `\r\n    object-fit: contain;\r\n  `,\r\n  h1: `\r\n    display: block;\r\n    font-size: 2em;\r\n    margin-block-start: 0.67em;\r\n    margin-block-end: 0.67em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  h2: `\r\n    display: block;\r\n    font-size: 1.5em;\r\n    margin-block-start: 0.83em;\r\n    margin-block-end: 0.83em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  h3: `\r\n    display: block;\r\n    font-size: 1.17em;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  h4: `\r\n    display: block;\r\n    margin-block-start: 1.33em;\r\n    margin-block-end: 1.33em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  h5: `\r\n    display: block;\r\n    font-size: 0.83em;\r\n    margin-block-start: 1.67em;\r\n    margin-block-end: 1.67em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  h6: `\r\n    display: block;\r\n    font-size: 0.67em;\r\n    margin-block-start: 2.33em;\r\n    margin-block-end: 2.33em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    font-weight: bold;\r\n  `,\r\n  table: `\r\n    display: table;\r\n    border-collapse: separate;\r\n    border-spacing: 2px;\r\n    border-color: gray;\r\n    box-sizing: border-box;\r\n    text-indent: initial;\r\n  `,\r\n  thead: `\r\n    display: table-header-group;\r\n    vertical-align: middle;\r\n    border-color: inherit;\r\n  `,\r\n  tbody: `\r\n    display: table-row-group;\r\n    vertical-align: middle;\r\n    border-color: inherit;\r\n  `,\r\n  tfoot: `\r\n    display: table-footer-group;\r\n    vertical-align: middle;\r\n    border-color: inherit;\r\n  `,\r\n  tr: `\r\n    vertical-align: middle;\r\n    display: table-row;\r\n    vertical-align: inherit;\r\n    border-color: inherit;\r\n  `,\r\n  col: `\r\n    display: table-column;\r\n  `,\r\n  colgroup: `\r\n    display: table-column-group;\r\n  `,\r\n  td: `\r\n    display: table-cell;\r\n    vertical-align: inherit;\r\n  `,\r\n  th: `\r\n    display: table-cell;\r\n    vertical-align: inherit;\r\n    font-weight: bold;\r\n    text-align: -internal-center;\r\n  `,\r\n  caption: `\r\n    display: table-caption;\r\n    text-align: -webkit-center;\r\n  `,\r\n  ul: `\r\n    display: block;\r\n    list-style-type: disc;\r\n    margin: 0;\r\n    padding: 0 1em;\r\n  `,\r\n  menu: `\r\n    display: block;\r\n    list-style-type: disc;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    padding-inline-start: 40px;\r\n  `,\r\n  dir: `\r\n    display: block;\r\n    list-style-type: disc;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n    padding-inline-start: 40px;\r\n  `,\r\n  ol: `\r\n    display: block;\r\n    list-style-type: decimal;\r\n    margin: 0;\r\n    padding: 0 1em;\r\n  `,\r\n  li: `\r\n    display: list-item;\r\n    text-align: -webkit-match-parent;\r\n    margin: 0;\r\n    padding: 0;\r\n  `,\r\n  dd: `\r\n    display: block;\r\n    margin-inline-start: 40px;\r\n  `,\r\n  dl: `\r\n    display: block;\r\n    margin-block-start: 1em;\r\n    margin-block-end: 1em;\r\n    margin-inline-start: 0;\r\n    margin-inline-end: 0;\r\n  `,\r\n  dt: `\r\n    display: block;\r\n  `,\r\n  form: `\r\n    display: block;\r\n    margin-top: 0em;\r\n  `,\r\n  label: `\r\n    cursor: default;\r\n  `,\r\n  legend: `\r\n    display: block;\r\n    padding-inline-start: 2px;\r\n    padding-inline-end: 2px;\r\n    border: none;\r\n  `,\r\n  fieldset: `\r\n    display: block;\r\n    margin-inline-start: 2px;\r\n    margin-inline-end: 2px;\r\n    padding-block-start: 0.35em;\r\n    padding-inline-start: 0.75em;\r\n    padding-inline-end: 0.75em;\r\n    padding-block-end: 0.625em;\r\n    border: 2px groove ThreeDFace;\r\n    min-inline-size: min-content;\r\n  `,\r\n  button: `\r\n    appearance: auto;\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    margin: 0em;\r\n    font: -webkit-small-control;\r\n    text-rendering: auto;\r\n    color: black;\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    line-height: normal;\r\n    text-transform: none;\r\n    text-indent: 0;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: start;\r\n  `,\r\n  textarea: `\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    margin: 0em;\r\n    font: -webkit-small-control;\r\n    text-rendering: auto;\r\n    color: black;\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    line-height: normal;\r\n    text-transform: none;\r\n    text-indent: 0;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: start;\r\n    appearance: auto;\r\n    border: 1px solid #767676;\r\n    column-count: initial !important;\r\n    -webkit-rtl-ordering: logical;\r\n    resize: auto;\r\n    cursor: text;\r\n    padding: 2px;\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word;\r\n    background-color: #ffffff;\r\n    font-family: monospace;\r\n  `,\r\n  input: `\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    margin: 0em;\r\n    font: -webkit-small-control;\r\n    text-rendering: auto;\r\n    color: black;\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    line-height: normal;\r\n    text-transform: none;\r\n    text-indent: 0;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: start;\r\n    appearance: auto;\r\n    padding: 1px 0;\r\n    border: 2px inset #767676;\r\n    -webkit-rtl-ordering: logical;\r\n    cursor: text;\r\n    background-color: #ffffff;\r\n  `,\r\n  datalist: `\r\n    display: none;\r\n  `,\r\n  area: `\r\n    display: inline;\r\n  `,\r\n  param: `\r\n    display: none;\r\n  `,\r\n  select: `\r\n    appearance: auto;\r\n    box-sizing: border-box;\r\n    align-items: center;\r\n    white-space: pre;\r\n    -webkit-rtl-ordering: logical;\r\n    color: black;\r\n    background-color: #ffffff;\r\n    border: 1px solid #767676;\r\n    cursor: default;\r\n    border-radius: 0;\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    margin: 0em;\r\n    font: -webkit-small-control;\r\n    text-rendering: auto;\r\n    color: black;\r\n    letter-spacing: normal;\r\n    word-spacing: normal;\r\n    line-height: normal;\r\n    text-transform: none;\r\n    text-indent: 0;\r\n    text-shadow: none;\r\n    display: inline-block;\r\n    text-align: start;\r\n  `,\r\n  optgroup: `\r\n    font-weight: bolder;\r\n    display: block;\r\n  `,\r\n  option: `\r\n    font-weight: normal;\r\n    display: block;\r\n    padding: 0 2px 1px 2px;\r\n    white-space: nowrap;\r\n    min-height: 1.2em;\r\n  `,\r\n  selectmenu: `\r\n    display: inline-block;\r\n  `,\r\n  output: `\r\n    display: inline;\r\n    unicode-bidi: isolate;\r\n  `,\r\n  meter: `\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    appearance: auto;\r\n    box-sizing: border-box;\r\n    display: inline-block;\r\n    height: 1em;\r\n    width: 5em;\r\n    vertical-align: -0.2em;\r\n    -webkit-user-modify: read-only !important;\r\n  `,\r\n  progress: `\r\n    -webkit-writing-mode: horizontal-tb !important;\r\n    appearance: auto;\r\n    box-sizing: border-box;\r\n    display: inline-block;\r\n    height: 1em;\r\n    width: 10em;\r\n    vertical-align: -0.2em;\r\n  `,\r\n  u: `\r\n    text-decoration: underline;\r\n  `,\r\n  ins: `\r\n    text-decoration: underline;\r\n  `,\r\n  strong: `\r\n    font-weight: bold;\r\n  `,\r\n  b: `\r\n    font-weight: bold;\r\n  `,\r\n  i: `\r\n    font-style: italic;\r\n  `,\r\n  cite: `\r\n    font-style: italic;\r\n  `,\r\n  em: `\r\n    font-style: italic;\r\n  `,\r\n  var: `\r\n    font-style: italic;\r\n  `,\r\n  dfn: `\r\n    font-style: italic;\r\n  `,\r\n  tt: `\r\n    font-family: monospace;\r\n  `,\r\n  code: `\r\n    font-family: monospace;\r\n  `,\r\n  kbd: `\r\n    font-family: monospace;\r\n  `,\r\n  samp: `\r\n    font-family: monospace;\r\n  `,\r\n  pre: `\r\n    display: block;\r\n    font-family: monospace;\r\n    white-space: pre;\r\n    margin: 1em 0;\r\n  `,\r\n  xmp: `\r\n    display: block;\r\n    font-family: monospace;\r\n    white-space: pre;\r\n    margin: 1em 0;\r\n  `,\r\n  plaintext: `\r\n    display: block;\r\n    font-family: monospace;\r\n    white-space: pre;\r\n    margin: 1em 0;\r\n  `,\r\n  listing: `\r\n    display: block;\r\n    font-family: monospace;\r\n    white-space: pre;\r\n    margin: 1em 0;\r\n  `,\r\n  mark: `\r\n    background-color: yellow;\r\n    color: black;\r\n  `,\r\n  big: `\r\n    font-size: larger;\r\n  `,\r\n  small: `\r\n    font-size: smaller;\r\n  `,\r\n  s: `\r\n    text-decoration: line-through;\r\n  `,\r\n  strike: `\r\n    text-decoration: line-through;\r\n  `,\r\n  del: `\r\n    text-decoration: line-through;\r\n  `,\r\n  sub: `\r\n    vertical-align: sub;\r\n    font-size: smaller;\r\n  `,\r\n  sup: `\r\n    vertical-align: super;\r\n    font-size: smaller;\r\n  `,\r\n  nobr: `\r\n    white-space: nowrap;\r\n  `,\r\n  ruby: `\r\n    text-indent: 0;\r\n  `,\r\n  rt: `\r\n    text-indent: 0;\r\n    line-height: normal;\r\n    -webkit-text-emphasis: none;\r\n    display: block;\r\n    font-size: 50%;\r\n    text-align: start;\r\n  `,\r\n  rp: `\r\n    display: none;\r\n  `,\r\n  noframes: `\r\n    display: none;\r\n  `,\r\n  frameset: `\r\n    display: block;\r\n    border-color: inherit;\r\n  `,\r\n  frame: `\r\n    display: block;\r\n  `,\r\n  iframe: `\r\n    border: 2px inset;\r\n  `,\r\n  details: `\r\n    display: block;\r\n  `,\r\n  summary: `\r\n    display: block;\r\n  `,\r\n  template: `\r\n    display: none;\r\n  `,\r\n  bdi: `\r\n    unicode-bidi: isolate;\r\n  `,\r\n  bdo: `\r\n    unicode-bidi: bidi-override;\r\n  `,\r\n  dialog: `\r\n    display: block;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    width: fit-content;\r\n    height: fit-content;\r\n    margin: auto;\r\n    border: solid;\r\n    padding: 1em;\r\n    background: white;\r\n    color: black;\r\n  `,\r\n  slot: `\r\n    display: contents;\r\n  `,\r\n}\r\n\r\nexport const getBasegetCssToJs = (key) => {\r\n  return baseCssToJs[key] || ''\r\n}","export const cssTojs = {\r\n  h1: `margin-block-start: 0;\r\n\tmargin-block-end: 0;`,\r\n  h2: `margin-block-start: 0;\r\n\tmargin-block-end: 0;\r\n\tcolor: #333;`,\r\n  h3: `margin-block-start: 0;\r\n\tmargin-block-end: 0;`,\r\n  code: `background-color: rgba(97, 97, 97, 0.1);\r\n\tcolor: #616161;\r\n  color: inherit;\r\n\tbackground: none;\r\n\tfont-size: 0.6rem;`,\r\n\tp: `margin: 1em 0;\r\n\t`,\r\n  pre: `background: #0D0D0D;\r\n\tcolor: #FFF;\r\n\tfont-family: 'JetBrainsMono', monospace;\r\n\tpadding: 0.5rem 0.75rem;\r\n\tborder-radius: 0.3rem;`,\r\n  img: `width: 100%;\r\n  max-width:100%;\r\n  height:auto;\r\n  display:block;\r\n  margin-top:0;\r\n  margin-bottom:0;`,\r\n\tul: `margin: 0;`,\r\n\tol: `margin: 0;`,\r\n\tli: `margin: 0;`,\r\n  blockquote: `padding-left: 1rem;\r\n\tmargin: 0;\r\n\tborder-left: 2px solid rgba(13, 13, 13, 0.1);`,\r\n  hr: `border: none;\r\n\tborder-top: 2px solid rgba(13, 13, 13, 0.1);\r\n\tmargin: 1rem 0;`,\r\n  table: `border-collapse: collapse;\r\n\ttable-layout: fixed;\r\n\twidth: 100%;\r\n\tmargin: 0;\r\n\toverflow: hidden;`,\r\n  td: `min-width: 1em;\r\n\tborder: 1px solid #ced4da;\r\n\tpadding: 3px 5px;\r\n\tvertical-align: top;\r\n\tbox-sizing: border-box;\r\n\tposition: relative;`,\r\n  th: `min-width: 1em;\r\n\tborder: 1px solid #ced4da;\r\n\tpadding: 3px 5px;\r\n\tvertical-align: top;\r\n\tbox-sizing: border-box;\r\n\tposition: relative;\r\n  font-weight: bold;\r\n\ttext-align: left;\r\n\tbackground-color: #f1f3f5;`,\r\n}\r\n\r\nexport const getCssToJs = (key) => {\r\n\treturn cssTojs[key] || ''\r\n}","import { getCssToJs } from \"./css\";\r\nimport { getBasegetCssToJs } from \"./base\"\r\n\r\nexport function formatRichText(html){\r\n  let newContent= html.replace(/]*>/gi,function(match, capture){\r\n    match = match.replace(/style=\"[^\"]+\"/gi, '').replace(/style='[^']+'/gi, '');\r\n    match = match.replace(/width=\"[^\"]+\"/gi, '').replace(/width='[^']+'/gi, '');\r\n    match = match.replace(/height=\"[^\"]+\"/gi, '').replace(/height='[^']+'/gi, '');\r\n    return match;\r\n  });\r\n  newContent = newContent.replace(/style=\"[^\"]+\"/gi,function(match, capture){\r\n    match = match.replace(/width:[^;]+;/gi, 'max-width:100%;').replace(/width:[^;]+;/gi, 'max-width:100%;');\r\n    return match;\r\n  });\r\n  newContent = newContent.replace(/]*\\/>/gi, '');\r\n  newContent = newContent.replace(/<img/gi, '<img style=\"max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;\"');\r\n  return newContent;\r\n}\r\n\r\nexport function addClassAndStyle(html) {\r\n  return html.replace(\r\n    '<br>', '<br />'\r\n  ).replace(\r\n    /<([a-zA-Z0-9]*) (.*?)>/g,\r\n    function(str, group, match, index, tpl) {\r\n      if (/style/g.test(str)) {\r\n        str = str.replace(/style=\"(.*?)\"/g, `style=\"${getBasegetCssToJs(group)}${getCssToJs(group)}$1\"`)\r\n      } else if(group == 'img') {\r\n        str = `<${group} class=\".h5-${group}\" style=\"${getBasegetCssToJs(group)}${getCssToJs(group)}\" ${match} />`\r\n      } else {\r\n        str = `<${group} class=\".h5-${group}\" style=\"${getBasegetCssToJs(group)}${getCssToJs(group)}\" ${match}>`\r\n      }\r\n      console.log('str', str);\r\n      console.log('group', group);\r\n      console.log('match', match);\r\n      console.log('index', index);\r\n      console.log('tpl', tpl);\r\n      return str\r\n    }\r\n  ).replace(\r\n    /<([a-zA-Z0-9]*)>/g, function(str, group, match, index, tpl) {\r\n      return `<${group} class=\".h5-${group}\" style=\"${getBasegetCssToJs(group)}${getCssToJs(group)}\">`\r\n    }\r\n  )\r\n}","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;ACpBA;AAAA;AAAA;AACA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAIA;AAOA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAIA;AAIA;AAOA;AAGA;AAOA;AAGA;AAIA;AAWA;AAGA;AAGA;AASA;AASA;AASA;AAQA;AASA;AASA;AAQA;AAKA;AAKA;AAKA;AAMA;AAGA;AAGA;AAIA;AAMA;AAIA;AAMA;AASA;AASA;AAMA;AAMA;AAIA;AAOA;AAGA;AAIA;AAGA;AAMA;AAWA;AAgBA;AA0BA;AAqBA;AAGA;AAGA;AAGA;AAyBA;AAIA;AAOA;AAGA;AAIA;AAUA;AASA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAMA;AAMA;AAMA;AAMA;AAIA;AAGA;AAGA;AAGA;AAGA;AAGA;AAIA;AAIA;AAGA;AAGA;AAQA;AAGA;AAGA;AAIA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAGA;AAaA;AA1jBA;AA+jBA;AACA;AACA;;;;;;;;;;;;;ACjkBA;AAAA;AAAA;AACA;AAEA;AAGA;AAEA;AAKA;AAEA;AAKA;AAMA;AACA;AACA;AACA;AAGA;AAGA;AAKA;AAMA;AA9CA;AAyDA;AACA;AACA;;;;;;;;;;;;;AC3DA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;;;;;;;;;;;AC5CA;;;;A","sourceRoot":""}