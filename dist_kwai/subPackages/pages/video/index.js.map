{"version":3,"file":"subPackages/pages/video/index.js","sources":["webpack:///./src/subPackages/pages/video/index.tsx","webpack:///./src/subPackages/pages/video/index.scss","webpack:///./src/subPackages/pages/video/index.tsx?e8ac"],"sourcesContent":["import { Progress, Swiper, SwiperItem, Video, View } from \"@tarojs/components\"\nimport React, { Component, useState } from \"react\"\nimport Taro from \"@tarojs/taro\"\n\nimport './index.scss'\n\nconst VideoPage = (props) => {\n  let videoContext = Taro.createVideoContext('video0');\n  const [paused, setPaused] = useState(false)\n  const [percent, setPercent] = useState({\n    currentTime: 0,\n    duration: 0\n  })\n\n  const onPlay = (e) => {\n    videoContext = Taro.createVideoContext('video'+e.detail.current)\n    videoContext.play();\n    setPaused(false);\n    if (e.detail.current > 0) {\n      Taro.createVideoContext('video'+(e.detail.current-1)).pause();\n      Taro.createVideoContext('video'+(e.detail.current+1)).pause();\n    }\n  }\n  const onPause = (e) => {\n    if (paused) {\n      videoContext.play();\n      setPaused(false);\n    } else {\n      videoContext.pause();\n      setPaused(true);\n    }\n  }\n\n  const onTimeUpdate = (e) => {\n    setPercent(e.detail)\n  }\n\n  const onProgress = (e) => {\n    const { x } = e.detail\n    const { screenWidth } = Taro.getSystemInfoSync()\n    videoContext.seek(percent.duration * (x/screenWidth))\n  }\n  return (\n    <Swiper\n      className='discover-swiper'\n      indicatorColor='#999'\n      indicatorActiveColor='#333'\n      vertical={true}\n      circular={false}\n      indicatorDots={false}\n      autoplay={false}\n      onChange={onPlay}\n    >\n      {[1,2,3,4].map((v, k) => {\n        return (\n          <SwiperItem\n            key={v}\n            className='discover-video-main'>\n            <Video\n              id={'video'+k}\n              className=\"discover-video\"\n              src='https://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400'\n              poster='https://misc.aotu.io/booxood/mobile-video/cover_900x500.jpg'\n              initialTime={0}\n              controls={false}\n              autoplay={k===0 ? true : false}\n              loop={false}\n              muted={false}\n              onClick={onPause}\n              autoPauseIfNavigate={true}\n              autoPauseIfOpenNative={true}\n              onTimeUpdate={onTimeUpdate}\n            />\n            <View className=\"discover-header\">\n              <View className=\"discover-loading-line\"></View>\n            </View>\n            <View className=\"discover-actions\">\n              <View className=\"discover-action discover-user-icon\">\n                <View className=\"discover-action-icon\">我</View>\n              </View>\n              <View className=\"discover-action discover-like\">\n                <View className=\"discover-action-icon\">赞</View>\n                <View className=\"discover-action-number\">868</View>\n              </View>\n              <View className=\"discover-action discover-review\">\n                <View className=\"discover-action-icon\">评</View>\n                <View className=\"discover-action-number\">68</View>\n              </View>\n              <View className=\"discover-action discover-forward\">\n                <View className=\"discover-action-icon\">转</View>\n                <View className=\"discover-action-number\">668</View>\n              </View>\n            </View>\n            <View className=\"discover-footer\">\n              <View className=\"discover-user-name\">\n                @Foooying\n              </View>\n              <View className=\"discover-desc\">\n                买农产品，上原生优品。\n              </View>\n              <View className=\"discover-music\"></View>\n              <View className=\"discover-play-line\">\n                <Progress\n                  className=\"discover-play-progress\"\n                  percent={Number(percent.currentTime/percent.duration) * 100}\n                  strokeWidth={0.5}\n                  color={\"#09BB07\"}\n                  activeColor={\"#09BB07\"}\n                  onClick={onProgress}\n                  />\n              </View>\n            </View>\n          </SwiperItem>)\n      })}\n    </Swiper>\n  )\n}\n\nexport default VideoPage","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../../node_modules/babel-loader/lib/index.js!./index.tsx\"\nvar config = {\"navigationStyle\":\"custom\",\"enableShareAppMessage\":true,\"enableShareTimeline\":true,\"navigationBarTitleText\":\"Discover\"};\ncomponent.enableShareTimeline = true\ncomponent.enableShareAppMessage = true\nvar inst = Page(createPageConfig(component, 'subPackages/pages/video/index', {root:{cn:[]}}, config || {}))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AACA;AAQA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAPA;AACA;AASA;AACA;AADA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAHA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AAGA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AAAA;AACA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAFA;AAZA;AAiBA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AARA;AAtCA;AAFA;AAVA;AArCA;AACA;AA+GA;;;;;;;;;;;ACtHA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}